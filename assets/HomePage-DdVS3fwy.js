import{j as s,L as h,u as _}from"./index-DX7mCWV5.js";import{V as g,C as p,E as j,A as k,P as f,g as N,u as P,a as v,L as b}from"./url-iK3NFesG.js";const d=10;function C({count:e,currentPage:t,onPageChange:n,disabled:o}){const i=Math.ceil(e/d),l=t===1,u=t===i||i===0,x=()=>{const a=[];a.push(1);let r=Math.max(2,t-Math.floor(3/2));const c=Math.min(i-1,r+3-1);r=Math.max(2,c-3+1),r>2&&a.push(-1);for(let m=r;m<=c;m++)a.push(m);return c<i-1&&a.push(-1),i>1&&a.push(i),a};return s.jsxs("div",{className:"pagination",children:[s.jsx("button",{disabled:l||o,onClick:()=>n(t-1),className:"pagination__button",children:"<"}),x().map(a=>a===-1?s.jsx("span",{className:"pagination__ellipsis",children:"..."},`ellipsis-${Math.random()}`):s.jsx("button",{disabled:o,onClick:()=>n(a),className:`pagination__button ${a===t?"pagination__button--active":""}`,children:a},a)),s.jsx("button",{disabled:u||o,onClick:()=>n(t+1),className:"pagination__button",children:">"})]})}function L(){return s.jsx(g,{type:"empty",message:"No pokemon found"})}function E(){return s.jsx("div",{className:"pokemon-list-skeleton","aria-label":"loading pokemon list",children:Array.from({length:7}).map((e,t)=>s.jsx(p,{children:s.jsxs("div",{className:"pokemon-list-skeleton__item",children:[s.jsx("div",{className:"pokemon-list-skeleton__image"}),s.jsxs("div",{className:"pokemon-list-skeleton__info",children:[s.jsx("div",{className:"pokemon-list-skeleton__name"}),s.jsx("div",{className:"pokemon-list-skeleton__type"})]})]})},t))})}function M({list:e,error:t,loading:n}){return n?s.jsx(E,{}):t?s.jsx(j,{}):e.length===0?s.jsx(L,{}):s.jsx("div",{className:"pokemon-list",children:e.map(o=>s.jsx(h,{to:`/pokemon/${o.id}`,children:s.jsx(p,{children:s.jsxs("div",{className:"pokemon-list__item",children:[s.jsx("div",{className:"pokemon-list__audio",children:s.jsx(k,{url:o.soundUrl})}),s.jsxs("div",{className:"pokemon-list__info",children:[s.jsx("span",{className:"pokemon-list__title",children:o.name}),s.jsx(f,{id:o.id})]})]})})},o.id))})}const S=()=>{const[e,t]=_();return{currentPage:Number(e.get("page"))||1,setCurrentPage:i=>{t({page:i.toString()})}}},y=e=>{const t=e.split("/"),n=t[t.length-2];return Number(n)},A=e=>`https://raw.githubusercontent.com/PokeAPI/cries/main/cries/pokemon/latest/${e}.ogg`,w=e=>e.sort((t,n)=>t.name.localeCompare(n.name)),U=e=>{if(!e||!(e!=null&&e.results))return{count:0,next:null,previous:null,results:[]};const t=e.results.map(n=>{const o=y(n.url);return{id:o,name:N(n.name),soundUrl:A(o)}});return{count:e.count,next:e.next,previous:e.previous,results:w(t)}},V=e=>{const{data:t,error:n,loading:o}=P({endpoint:v.pokemon({limit:d,offset:(e-1)*d}),transformer:U});return{pokemonList:t,error:n,loading:o}};function I(){const{currentPage:e,setCurrentPage:t}=S(),{pokemonList:n,error:o,loading:i}=V(e),l=u=>{t(u)};return s.jsxs(b,{children:[s.jsx(M,{list:n.results,error:o,loading:i}),s.jsx(C,{count:n.count,next:n.next,previous:n.previous,currentPage:e,onPageChange:l,disabled:i})]})}export{I as default};
